<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Clem</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1 style="word-break: break-word; white-space: normal;">
            Your IP Address is <strong>{{ client_ip }}</strong>
        </h1>
        <div class="info-box">
            <h4><strong>More Information</strong></h4>
            <hr>
            <p><strong>Location:</strong> {{ geo.city }}, {{ geo.region }}, {{ geo.country }}</p>
            <p><strong>ISP:</strong> {{ geo.org }}</p>
            <hr>
            <p>Scroll down for even <strong>MORE</strong> info!</p>
        </div>
    </div>

    <div class="image-container">
        <img src="/static/clem.jpg" alt="Mr.Clem">
    </div>

    <!-- Start dynamic map -->
    <div class="map-container">
	<div id="map"></div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const loc = "{{ geo.loc }}".split(',');
        const lat = parseFloat(loc[0]);
        const lon = parseFloat(loc[1]);

	const map = L.map('map', {
            zoomControl: false,
            dragging: false,
            scrollWheelZoom: false,
            doubleClickZoom: false,
            boxZoom: false,
            keyboard: false,
            tap: false,
            touchZoom: false
        }).setView([lat, lon], 10);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        L.marker([lat, lon])
            .addTo(map)
            .bindPopup("{{ geo.city }}, {{ geo.region }}")
            .openPopup();
    </script>
    <!-- End dynamic map -->

    <div class="container">
        <h1 style="word-break: break-word; white-space: normal;">Even More Information</h1>
        <div class="info-box">
            <hr>
            <p><strong>IP Address:</strong> {{ client_ip }}</p>
            <p><strong>Port:</strong> {{ client_port }}</p>
            <p><strong>ASN:</strong> {{ geo.asn }} -- {{ geo.as_name }} -- {{ geo.as_domain }}</p>
            <p><strong>Location:</strong> {{ geo.city }}, {{ geo.region }}, {{ geo.country }}</p>
            <p><strong>Timezone:</strong> {{ geo.timezone }}</p>
            <p><strong>Coordinates:</strong> {{ geo.loc }}</p>
            <p><strong>Browser:</strong> {{ user_agent }}</p>
        </div>
    </div>
</body>
</html>
